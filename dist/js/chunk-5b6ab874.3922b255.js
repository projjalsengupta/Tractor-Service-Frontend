(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b6ab874"],{"017e":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("v-toolbar",{attrs:{flat:"",color:"grey lighten-3"}},[o("v-btn",{attrs:{icon:""},on:{click:t.goHome}},[o("v-icon",[t._v("mdi-arrow-left")])],1),o("v-toolbar-title",[t._v("Home")])],1),o("v-form",{ref:"form",on:{submit:function(e){return e.preventDefault(),t.createAccountWithBooking(e)}},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[o("v-container",[o("v-row",[o("v-chip",{staticClass:"ml-2 mr-2"},[o("v-icon",{attrs:{left:"",color:"accent"}},[t._v("mdi-account")]),t._v("Personal Information ")],1)],1),o("v-row",[o("v-col",{staticClass:"align-center d-flex flex-row",attrs:{cols:"12",md:"4"}},[null!=t.imgUrl?o("v-avatar",{attrs:{slot:"prepend-icon",color:"accent",size:"64px"},slot:"prepend-icon"},[o("img",{staticClass:"center-cropped",attrs:{src:t.imgUrl}})]):o("v-icon",[t._v("mdi-camera")]),o("v-file-input",{staticClass:"ml-2",attrs:{"prepend-icon":null,accept:"image/png, image/jpeg, image/bmp",label:"Photo"},on:{change:t.photoChanged},model:{value:t.photo,callback:function(e){t.photo=e},expression:"photo"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.bookingnameRules,counter:30,disabled:t.loading,label:"Booking name",required:""},model:{value:t.bookingname,callback:function(e){t.bookingname=e},expression:"bookingname"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.nicknameRules,counter:15,disabled:t.loading,label:"Nick name (optional)",required:""},model:{value:t.nickname,callback:function(e){t.nickname=e},expression:"nickname"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{disabled:t.loading,rules:t.sonofRules,counter:30,label:"Son of",required:""},model:{value:t.sonof,callback:function(e){t.sonof=e},expression:"sonof"}})],1)],1),o("v-row",[o("v-chip",{staticClass:"ml-2 mr-2"},[o("v-icon",{attrs:{left:"",color:"accent"}},[t._v("mdi-earth")]),t._v("Address ")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.villageRules,counter:20,disabled:t.loading,label:"Village",required:""},model:{value:t.village,callback:function(e){t.village=e},expression:"village"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{disabled:t.loading,rules:t.postRules,counter:20,label:"Post",required:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.ctrlKey?t.copyVillageToPost(e):null)}},model:{value:t.post,callback:function(e){t.post=e},expression:"post"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.policestationRules,counter:20,label:"Police station",disabled:t.loading,required:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.ctrlKey?t.copyPostToPoliceStation(e):null)}},model:{value:t.policestation,callback:function(e){t.policestation=e},expression:"policestation"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{disabled:t.loading,rules:t.distRules,counter:20,label:"District",required:""},model:{value:t.dist,callback:function(e){t.dist=e},expression:"dist"}})],1)],1),o("v-row",[o("v-chip",{staticClass:"ml-2 mr-2"},[o("v-icon",{attrs:{left:"",color:"accent"}},[t._v("mdi-phone")]),t._v("Phone numbers ")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.mobileRules,counter:10,disabled:t.loading,type:"number",label:"Mobile number",required:""},model:{value:t.mobile,callback:function(e){t.mobile=e},expression:"mobile"}})],1),o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{rules:t.whatsappRules,counter:10,type:"number",disabled:t.loading,label:"Whatsapp number (optional)",required:""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),e.ctrlKey?t.copyMobileToWhatsapp(e):null)}},model:{value:t.whatsapp,callback:function(e){t.whatsapp=e},expression:"whatsapp"}})],1)],1),o("v-row",[o("v-chip",{staticClass:"ml-2 mr-2"},[o("v-icon",{attrs:{left:"",color:"accent"}},[t._v("mdi-chevron-right")]),t._v("Others ")],1)],1),o("v-row",[o("v-col",{attrs:{cols:"12",md:"4"}},[o("v-text-field",{attrs:{disabled:t.loading,rules:t.challanRules,counter:10,label:"Challan number",required:""},model:{value:t.challan,callback:function(e){t.challan=e},expression:"challan"}})],1)],1),o("v-row",[o("v-spacer"),o("v-btn",{staticClass:"ml-2 mr-2",attrs:{type:"submit",large:"",color:"accent",rounded:"",loading:t.loading,disabled:t.loading},on:{click:t.createAccountWithBooking}},[o("v-icon",{attrs:{left:""}},[t._v("mdi-plus")]),t._v("Create booking ")],1)],1)],1)],1)],1)},n=[],a=(o("d3b7"),o("3ca3"),o("ddb0"),o("2b3d"),o("4f4e")),l=new a,s={name:"CreateAccount",data:function(){return{imgUrl:null,photo:null,photoBlob:null,customerId:null,valid:!1,loading:!1,bookingname:"",nickname:"",sonof:"",village:"",post:"",policestation:"",dist:"",mobile:"",whatsapp:"",challan:"",tractorModelNo:"",tractorEngineNo:"",tractorChasisNo:"",bookingnameRules:[function(t){return!!t||"Booking name is required"},function(t){return t.length<=30||"Booking name must be less than 30 characters"}],nicknameRules:[function(t){return t.length<=15||"Nick name must be less than 15 characters"}],sonofRules:[function(t){return!!t||"Son of field is required"},function(t){return t.length<=30||"Son of field must be less than 30 characters"}],tractorModelNoRules:[function(t){return!!t||"Tractor model number of field is required"},function(t){return t.length<=30||"Tractor model number of field must be less than 30 characters"}],tractorEngineNoRules:[function(t){return!!t||"Tractor engine number of field is required"},function(t){return t.length<=30||"Tractor engine number of field must be less than 30 characters"}],tractorChasisNoRules:[function(t){return!!t||"Tractor chasis number of field is required"},function(t){return t.length<=30||"Tractor chasis number of field must be less than 30 characters"}],villageRules:[function(t){return!!t||"Village is required"},function(t){return t.length<=20||"Village must be less than 20 characters"}],postRules:[function(t){return!!t||"Post is required"},function(t){return t.length<=20||"Post must be less than 20 characters"}],policestationRules:[function(t){return!!t||"Police station is required"},function(t){return t.length<=20||"Police station must be less than 20 characters"}],distRules:[function(t){return!!t||"District is required"},function(t){return t.length<=20||"District must be less than 20 characters"}],mobileRules:[function(t){return!!t||"Mobile is required"},function(t){return 10==t.length||"Mobile number should be of 10 digits"}],whatsappRules:[function(t){return 10==t.length||0==t.length||"Whatsapp number should be of 10 digits"}],challanRules:[function(t){return!!t||"Challan is required"},function(t){return t.length<=10||"Challan must be less than 10 characters"}]}},methods:{goHome:function(){this.$router.push("/home")},copyMobileToWhatsapp:function(){this.whatsapp=this.mobile},copyVillageToPost:function(){this.post=this.village},copyPostToPoliceStation:function(){this.policestation=this.post},photoChanged:function(){var t=this;if(null!=this.photo){this.imgUrl=URL.createObjectURL(this.photo),this.loading=!0;var e=[this.photo];l.compress(e,{size:.05,quality:1,maxWidth:250,maxHeight:250,resize:!0}).then((function(e){var o=e[0],i=o.data,n=o.ext,l=a.convertBase64ToFile(i,n);t.photoBlob=l,t.loading=!1}))}else this.imgUrl=null},addPhoto:function(){var t=this;null!=this.photo?this.$store.dispatch("editPhoto",{customerId:this.customerId,file:this.photoBlob}).then((function(e){e.error?(t.$store.commit("setSnackbarText",{snackbarText:"Account created. Booking added. Error uploading photo. Try again"}),t.$store.commit("setSnackbarVisibility",{visible:!0})):(t.$store.commit("setSnackbarText",{snackbarText:"Account created. Booking added. Photo uploaded."}),t.$store.commit("setSnackbarVisibility",{visible:!0}),t.$refs.form.reset(),t.customerId=null,t.photo=null,t.bookingname="",t.nickname="",t.sonof="",t.village="",t.post="",t.policestation="",t.dist="",t.mobile="",t.whatsapp="",t.challan=""),t.loading=!1})):(this.loading=!1,this.$store.commit("setSnackbarText",{snackbarText:"Account created. Booking added."}),this.$store.commit("setSnackbarVisibility",{visible:!0}),this.$refs.form.reset(),this.customerId=null,this.photo=null,this.bookingname="",this.nickname="",this.sonof="",this.village="",this.post="",this.policestation="",this.dist="",this.mobile="",this.whatsapp="",this.challan="")},addBooking:function(){var t=this;this.$store.dispatch("editBooking",{customerId:this.customerId,payload:{bookingName:this.bookingname,sonOf:this.sonof,nickName:this.nickname,village:this.village,post:this.post,policeStation:this.policestation,dist:this.dist,mobile:this.mobile,whatsapp:this.whatsapp,challanNo:this.challan}}).then((function(e){e.error&&(t.$store.commit("setSnackbarText",{snackbarText:"Error creating booking"}),t.$store.commit("setSnackbarVisibility",{visible:!0})),t.addPhoto()}))},createAccountWithBooking:function(){var t=this;this.$refs.form.validate(),this.valid&&(this.loading=!0,null==this.customerId?this.$store.dispatch("createAccount").then((function(e){e.error?(t.$store.commit("setSnackbarText",{snackbarText:e.message}),t.$store.commit("setSnackbarVisibility",{visible:!0}),t.customerId=null):(t.customerId=e.customerId,t.addBooking())})):this.addBooking())}},beforeCreate:function(){this.$store.state.loggedIn||(this.$store.commit("setSnackbarText",{snackbarText:"Log in first"}),this.$store.commit("setSnackbarVisibility",{visible:!0}),this.$router.push("/"))}},r=s,c=(o("2d24"),o("2877")),u=o("6544"),d=o.n(u),h=o("8212"),m=o("8336"),b=o("cc20"),p=o("62ad"),f=o("a523"),v=o("23a7"),g=o("4bd4"),k=o("132d"),x=o("0fd9"),y=o("2fa4"),w=o("8654"),T=o("71d9"),R=o("2a7f"),C=Object(c["a"])(r,i,n,!1,null,"34aa593d",null);e["default"]=C.exports;d()(C,{VAvatar:h["a"],VBtn:m["a"],VChip:b["a"],VCol:p["a"],VContainer:f["a"],VFileInput:v["a"],VForm:g["a"],VIcon:k["a"],VRow:x["a"],VSpacer:y["a"],VTextField:w["a"],VToolbar:T["a"],VToolbarTitle:R["a"]})},"2d24":function(t,e,o){"use strict";var i=o("ee4d"),n=o.n(i);n.a},ee4d:function(t,e,o){}}]);
//# sourceMappingURL=chunk-5b6ab874.3922b255.js.map